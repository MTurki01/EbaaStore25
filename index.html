<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <title> EbaaStore - ุงูุฑุฆูุณูุฉ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrapper">
    <header class="card">
      <h1 style="color:#3a2230"> EbaaStore</h1>
      <nav>
        <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="inventory.html">ุงููุฎุฒูู</a>
        <a href="Orders.html">ุงูุทูุจูุงุช</a>
        <a href="finances.html">ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</a>
      </nav>
    </header>

    <div class="card">
      <h2 style="color:#6a3944">ุงููุฎุฒูู</h2>
      <p class="small">ุงุฏุงุฑุฉ ุงูููุชุฌุงุช โ ุฃุถู ุฃู ุนุฏูู ูู ุตูุญุฉ ุงููุฎุฒูู</p>
      <div class="center-row">
        <a class="primary" href="inventory.html"><button class="primary">ูุชุญ ุงููุฎุฒูู</button></a>
      </div>
    </div>

    <div class="card">
      <h2 style="color:#6a3944">ุงูุทูุจูุงุช</h2>
      <p class="small">ุงุณุชูุจุงู ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช</p>
      <div class="center-row">
        <a class="primary" href="orders.html"><button class="primary">ูุชุญ ุงูุทูุจูุงุช</button></a>
      </div>
    </div>

    <div class="card">
      <h2 style="color:#6a3944">ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</h2>
      <p class="small">ุฃุฏุฎู ูุตุฑูู ุฃู ุฅูุฑุงุฏ ุซู ุงุนุฑุถ ุงูุตุงูู</p>
      <div class="center-row">
        <a class="primary" href="finances.html"><button class="primary">ูุชุญ ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</button></a>
      </div>
      <div style="margin-top:12px;">
        <button class="primary" id="calcNetBtn">๐ ุญุณุงุจ ุงูุตุงูู</button>
        <div id="netResult" class="alert"></div>
      </div>
    </div>
  </div>

  <script type="module">
    // Firebase imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js";

    // ุถุน ููุงุชูุญู ุงูุญููููุฉ ููุง (apiKey ู appId ูุบูุฑูุง)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "ebaastore25.firebaseapp.com",
      databaseURL: "https://ebaastore25-default-rtdb.europe-west1.firebasedatabase.app/",
      projectId: "ebaastore25",
      storageBucket: "ebaastore25.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    async function calculateNet(){
      const dbRef = ref(db);
      const expSnap = await get(child(dbRef, "expenses"));
      const incSnap = await get(child(dbRef, "incomes"));
      let totalExp = 0, totalInc = 0;
      if(expSnap.exists()){
        expSnap.forEach(s => totalExp += Number(s.val().amount || 0));
      }
      if(incSnap.exists()){
        incSnap.forEach(s => totalInc += Number(s.val().amount || 0));
      }
      const net = totalInc - totalExp;
      document.getElementById("netResult").innerText = `ุงูุตุงูู: ${net}`;
    }

    document.getElementById("calcNetBtn").addEventListener("click", calculateNet);
  </script>
</body>
</html>

