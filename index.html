<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EbaaStore - ุงูุฑุฆูุณูุฉ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrapper">
    <header class="card">
      <h1 style="color:#3a2230">EbaaStore</h1>
      <nav>
        <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="inventory.html">ุงููุฎุฒูู</a>
        <a href="Orders.html">ุงูุทูุจูุงุช</a>
        <a href="finances.html">ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</a>
      </nav>
    </header>

    <div class="card">
      <h2 style="color:#6a3944">ุงููุฎุฒูู</h2>
      <p class="small">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช โ ุฃุถู ุฃู ุนุฏูู ูู ุตูุญุฉ ุงููุฎุฒูู</p>
      <div class="center-row">
        <a class="primary" href="inventory.html"><button class="primary">ูุชุญ ุงููุฎุฒูู</button></a>
      </div>
    </div>

    <div class="card">
      <h2 style="color:#6a3944">ุงูุทูุจูุงุช</h2>
      <p class="small">ุงุณุชูุจุงู ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช</p>
      <div class="center-row">
        <a class="primary" href="Orders.html"><button class="primary">ูุชุญ ุงูุทูุจูุงุช</button></a>
      </div>
    </div>

    <div class="card">
      <h2 style="color:#6a3944">ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</h2>
      <p class="small">ุฃุฏุฎู ูุตุฑูู ุฃู ุฅูุฑุงุฏ ุซู ุงุนุฑุถ ุงูุตุงูู</p>
      <div class="center-row">
        <a class="primary" href="finances.html"><button class="primary">ูุชุญ ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช</button></a>
      </div>

      <div style="margin-top:12px;">
        <button class="primary" id="calcNetBtn">๐ ุญุณุงุจ ุงูุตุงูู</button>
        <div id="netResult" class="alert" style="margin-top:10px; font-weight:bold; color:#6a3944;"></div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDvz2YRGo4YVXIJPkeaquhKBBpr8Hia-PA",
      authDomain: "ebaastore25.firebaseapp.com",
      databaseURL: "https://ebaastore25-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "ebaastore25",
      storageBucket: "ebaastore25.firebasestorage.app",
      messagingSenderId: "204776755293",
      appId: "1:204776755293:web:05fb5690dfc7cc026b7db4",
      measurementId: "G-CGQWYLKMYK"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    async function calculateNet() {
      const dbRef = ref(db);
      let totalExp = 0, totalInc = 0;

      try {
        const [expSnap, incSnap] = await Promise.all([
          get(child(dbRef, "expenses")),
          get(child(dbRef, "incomes"))
        ]);

        if (expSnap.exists()) {
          expSnap.forEach(s => {
            const val = parseFloat(s.val().amount);
            if (!isNaN(val)) totalExp += val;
          });
        }

        if (incSnap.exists()) {
          incSnap.forEach(s => {
            const val = parseFloat(s.val().amount);
            if (!isNaN(val)) totalInc += val;
          });
        }

        const net = totalInc - totalExp;
        document.getElementById("netResult").innerText = `๐ ุงูุตุงูู: ${net} ุฏููุงุฑ`;
      } catch (e) {
        document.getElementById("netResult").innerText = "ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช โ";
        console.error(e);
      }
    }

    document.getElementById("calcNetBtn").addEventListener("click", calculateNet);
  </script>
</body>
</html>







